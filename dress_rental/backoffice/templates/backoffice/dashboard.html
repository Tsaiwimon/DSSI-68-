{% extends "backoffice/base.html" %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö{% endblock %}
{% block page_subtitle %}‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß{% endblock %}

{% block content %}

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-5 mb-6">
  
  <div class="bg-white rounded-2xl shadow border border-black/5 p-5">
    <div class="flex items-start justify-between">
      <div>
        <div class="text-sm text-neutral-600">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
        <div class="text-3xl font-bold text-neutral-900 mt-2">{{ total_users }}</div>
      </div>
      <div class="h-10 w-10 rounded-xl bg-blue-50 text-blue-600 flex items-center justify-center">
        <span class="text-lg">üë§</span>
      </div>
    </div>
    <div class="text-xs text-neutral-400 mt-2">Active Users</div>
  </div>

  <div class="bg-white rounded-2xl shadow border border-black/5 p-5">
    <div class="flex items-start justify-between">
      <div>
        <div class="text-sm text-neutral-600">‡∏£‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î</div>
        <div class="text-3xl font-bold text-neutral-900 mt-2">{{ total_shops }}</div>
      </div>
      <div class="h-10 w-10 rounded-xl bg-green-50 text-green-600 flex items-center justify-center">
        <span class="text-lg">üè™</span>
      </div>
    </div>
    <div class="text-xs text-neutral-400 mt-2">Active Shops</div>
  </div>

  <div class="bg-white rounded-2xl shadow border border-black/5 p-5">
    <div class="flex items-start justify-between">
      <div>
        <div class="text-sm text-neutral-600">‡∏ä‡∏∏‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
        <div class="text-3xl font-bold text-neutral-900 mt-2">{{ total_dresses }}</div>
      </div>
      <div class="h-10 w-10 rounded-xl bg-purple-50 text-purple-600 flex items-center justify-center">
        <span class="text-lg">üëó</span>
      </div>
    </div>
    <div class="text-xs text-neutral-400 mt-2">Total Items</div>
  </div>

  <div class="bg-white rounded-2xl shadow border border-black/5 p-5 relative overflow-hidden">
    <div class="flex items-start justify-between relative z-10">
      <div>
        <div class="text-sm text-neutral-600">‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div>
        <div class="text-3xl font-bold text-amber-600 mt-2">{{ pending_shops }}</div>
        
        <a href="{% url 'backoffice:shop_pending_list' %}"
           class="mt-3 inline-block px-3 py-1 rounded-lg bg-orange-100 text-orange-700 text-xs font-semibold hover:bg-orange-200 transition">
          ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ >
        </a>
      </div>
      <div class="h-10 w-10 rounded-xl bg-orange-50 text-orange-600 flex items-center justify-center">
        <span class="text-lg">‚è≥</span>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-2xl shadow border border-black/5 p-5 relative overflow-hidden">
    <div class="flex items-start justify-between relative z-10">
      <div>
        <div class="text-sm text-neutral-600">‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</div>
        <div class="text-3xl font-bold text-red-600 mt-2">{{ latest_issues|length }}</div>
        
        <a href="{% url 'backoffice:reports' %}"
           class="mt-3 inline-block px-3 py-1 rounded-lg bg-red-100 text-red-700 text-xs font-semibold hover:bg-red-200 transition">
          ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô >
        </a>
      </div>
      <div class="h-10 w-10 rounded-xl bg-red-50 text-red-600 flex items-center justify-center">
        <span class="text-lg">üö®</span>
      </div>
    </div>
  </div>

</div>

<div class="bg-white rounded-2xl shadow border border-black/5 overflow-hidden">
  <div class="p-5 border-b flex items-center justify-between">
    <div>
      <div class="text-lg font-semibold text-neutral-900">‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
      <div class="text-sm text-neutral-500">
        ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
      </div>
    </div>
    <a href="{% url 'backoffice:reports' %}"
       class="text-sm px-3 py-2 rounded-xl bg-neutral-100 hover:bg-neutral-200 text-neutral-800">
      ‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    </a>
  </div>

  {% if latest_issues and latest_issues|length > 0 %}
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead class="bg-neutral-50 text-neutral-600">
          <tr>
            <th class="text-left font-semibold px-6 py-3">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th class="text-left font-semibold px-6 py-3">‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤)</th>
            <th class="text-left font-semibold px-6 py-3">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</th>
            <th class="text-left font-semibold px-6 py-3">‡∏ú‡∏π‡πâ‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)</th>
            <th class="text-right font-semibold px-6 py-3">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
          </tr>
        </thead>
        <tbody class="divide-y">
          {% for it in latest_issues %}
            <tr class="hover:bg-neutral-50/60">
              <td class="px-6 py-4 text-neutral-700">{{ it.date|default:"-" }}</td>
              <td class="px-6 py-4 text-neutral-900 font-medium">{{ it.user|default:"-" }}</td>
              <td class="px-6 py-4 text-neutral-700">{{ it.topic|default:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤" }}</td>
              <td class="px-6 py-4 text-neutral-700">{{ it.shop|default:"-" }}</td>
              <td class="px-6 py-4 text-right">
                <a href="{% url 'backoffice:reports' %}{% if it.id %}?q={{ it.id }}{% endif %}"
                   class="inline-flex items-center justify-center px-3 py-2 rounded-xl bg-neutral-900 text-white text-xs font-semibold hover:bg-neutral-800">
                  ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="p-6">
      <div class="rounded-xl border border-dashed border-neutral-300 bg-neutral-50 p-6">
        <div class="text-neutral-900 font-semibold">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤</div>
      </div>
    </div>
  {% endif %}
</div>

{% endblock %}