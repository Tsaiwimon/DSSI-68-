{% load static %}
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>{{ store.name }}</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <script>
    function toggleDropdown() {
      const menu = document.getElementById("settingsDropdown");
      menu.classList.toggle("hidden");
    }

    window.addEventListener("click", function(e) {
      const dropdown = document.getElementById("settingsDropdown");
      const button = document.getElementById("settingsButton");
      if (!button.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add("hidden");
      }
    });
  </script>
</head>

<body class="bg-gray-50">

<!-- Header (‡∏Ñ‡∏á‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÄ‡∏î‡∏¥‡∏°) -->
<header class="bg-gradient-to-r from-pink-200 via-yellow-100 to-blue-200 shadow w-full">
  <div class="flex items-center justify-between px-10 py-10">
    <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ -->
    <div class="flex items-center space-x-3">
      <h1 class="text-2xl font-bold text-gray-900">‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô</h1>
    </div>

    <!-- Store Logo + Name + Settings -->
    <div class="flex items-center space-x-3 relative">
      {% if store.shop_logo %}
        <img src="{{ store.shop_logo.url }}" alt="logo" class="w-12 h-12 rounded-full object-cover">
      {% else %}
        <img src="{% static 'images/store-placeholder.png' %}" alt="logo" class="w-12 h-12 rounded-full object-cover">
      {% endif %}
      <span class="font-semibold text-lg">{{ store.name }}</span>

      <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ü‡∏±‡∏ô‡πÄ‡∏ü‡∏∑‡∏≠‡∏á -->
      <button id="settingsButton" onclick="toggleDropdown()"
              class="text-gray-700 hover:text-gray-900 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.591 1.093c1.53-.994 3.385.86 2.39 2.39a1.724 1.724 0 001.092 2.592c1.757.426 1.757 2.924 0 3.35a1.724 1.724 0 00-1.093 2.591c.994 1.53-.86 3.385-2.39 2.39a1.724 1.724 0 00-2.592 1.092c-.426 1.757-2.924 1.757-3.35 0a1.724 1.724 0 00-2.591-1.093c-1.53.995-3.385-.86-2.39-2.39a1.724 1.724 0 00-1.092-2.592c-1.757-.426-1.757-2.924 0-3.35a1.724 1.724 0 001.093-2.591c-.995-1.53.86-3.385 2.39-2.39a1.724 1.724 0 002.592-1.092z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      </button>

      <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß -->
      <div id="settingsDropdown" class="hidden absolute right-0 top-14 bg-white rounded-lg shadow-lg border border-gray-200 w-48">
        <ul class="py-2 text-sm text-gray-700">
          <li><a href="#" class="block px-4 py-2 hover:bg-gray-100">‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a></li>
          <li><a href="#" class="block px-4 py-2 hover:bg-gray-100">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a></li>
          <li><hr class="my-1 border-gray-200"></li>
          <li><a href="#" class="block px-4 py-2 text-red-500 hover:bg-red-50">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
        </ul>
      </div>
    </div>
  </div>
</header>

<!-- Tabs -->
<div class="flex justify-center space-x-3 bg-white shadow py-3 px-4 border-t border-gray-100">
  <a href="{% url 'dress:my_store' store.id %}"
     class="flex-1 text-center py-3 rounded-lg border font-semibold hover:bg-gray-100 transition">
    ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô
  </a>
  <a href="{% url 'dress:store_dress' store.id %}"
     class="flex-1 text-center py-3 rounded-lg border font-semibold hover:bg-gray-100 transition">
    ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
  </a>
  <a href="{% url 'dress:back_office' store.id %}"
     class="flex-1 text-center py-3 rounded-lg bg-black text-white font-semibold hover:bg-gray-800 transition">
    ‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô
  </a>
</div>

<!-- Main Content -->
<main class="max-w-5xl mx-auto px-4 py-10 space-y-10">

  <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô -->
  <section class="bg-white shadow-md rounded-2xl p-6 flex flex-col md:flex-row items-center justify-between">
    <div class="flex items-center space-x-4">
      <img src="{% if store.shop_logo %}{{ store.shop_logo.url }}{% else %}{% static 'img/shop-avatar.png' %}{% endif %}"
           alt="shop logo" class="w-20 h-20 rounded-full shadow border border-gray-200">
      <div>
        <h2 class="text-xl font-semibold text-gray-800">{{ store.name }}</h2>
        <p class="text-gray-500 text-sm mt-1">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á: {{ request.user.username }}</p>
      </div>
    </div>

    <a href="{% url 'dress:public_store' store.id %}"
       class="bg-blue-600 hover:bg-blue-700 text-white text-sm px-6 py-2 rounded-md shadow mt-4 md:mt-0 transition">
       ‡∏î‡∏π‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
    </a>
  </section>

  <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤‡∏ä‡∏∏‡∏î -->
  <section>
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold text-gray-800">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤‡∏ä‡∏∏‡∏î‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
      <p class="text-xs text-gray-500">
        ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ä‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß
      </p>
    </div>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
      <!-- ‡∏Ñ‡∏≥‡πÄ‡∏ä‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà -->
      <a href="{% url 'dress:back_office_orders_new' store.id %}"
         class="bg-white border border-gray-100 p-4 rounded-2xl text-center shadow-sm
                hover:shadow-md hover:-translate-y-0.5 transform transition block">
        <div class="w-10 h-10 mx-auto mb-2 rounded-full bg-blue-50 flex items-center justify-center">
          <span class="text-2xl">üõí</span>
        </div>
        <p class="text-2xl font-bold text-blue-700">{{ new_count }}</p>
        <p class="text-gray-600 text-sm mt-1">‡∏Ñ‡∏≥‡πÄ‡∏ä‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà</p>
      </a>

      <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á -->
      <a href="{% url 'dress:back_office_orders_shipping' store.id %}"
         class="bg-white border border-gray-100 p-4 rounded-2xl text-center shadow-sm
                hover:shadow-md hover:-translate-y-0.5 transform transition block">
        <div class="w-10 h-10 mx-auto mb-2 rounded-full bg-indigo-50 flex items-center justify-center">
          <span class="text-2xl">üöö</span>
        </div>
        <p class="text-2xl font-bold text-indigo-700">{{ shipping_count }}</p>
        <p class="text-gray-600 text-sm mt-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>
      </a>

      <!-- ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å -->
      <a href="{% url 'dress:back_office_orders_cancelled' store.id %}"
         class="bg-white border border-gray-100 p-4 rounded-2xl text-center shadow-sm
                hover:shadow-md hover:-translate-y-0.5 transform transition block">
        <div class="w-10 h-10 mx-auto mb-2 rounded-full bg-red-50 flex items-center justify-center">
          <span class="text-2xl">‚ùå</span>
        </div>
        <p class="text-2xl font-bold text-red-600">{{ cancelled_count }}</p>
        <p class="text-gray-600 text-sm mt-1">‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</p>
      </a>

      <!-- ‡πÄ‡∏ä‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à -->
      <a href="{% url 'dress:back_office_orders_completed' store.id %}"
         class="bg-white border border-gray-100 p-4 rounded-2xl text-center shadow-sm
                hover:shadow-md hover:-translate-y-0.5 transform transition block">
        <div class="w-10 h-10 mx-auto mb-2 rounded-full bg-green-50 flex items-center justify-center">
          <span class="text-2xl">‚úÖ</span>
        </div>
        <p class="text-2xl font-bold text-green-700">{{ completed_count }}</p>
        <p class="text-gray-600 text-sm mt-1">‡πÄ‡∏ä‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
      </a>

      <!-- ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
      <a href="{% url 'dress:back_office_reviews' store.id %}"
         class="bg-white border border-gray-100 p-4 rounded-2xl text-center shadow-sm
                hover:shadow-md hover:-translate-y-0.5 transform transition block">
        <div class="w-10 h-10 mx-auto mb-2 rounded-full bg-yellow-50 flex items-center justify-center">
          <span class="text-2xl">‚≠ê</span>
        </div>
        <p class="text-2xl font-bold text-yellow-600">{{ review_count }}</p>
        <p class="text-gray-600 text-sm mt-1">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</p>
      </a>
    </div>
  </section>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô -->
  <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <a href="{% url 'dress:store_dress' store.id %}"
       class="bg-white border border-gray-200 rounded-2xl shadow p-6 text-center
              hover:shadow-md hover:-translate-y-0.5 transform transition">
      <div class="text-4xl mb-3">üëó</div>
      <p class="font-semibold text-gray-800">‡∏ä‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</p>
      <p class="text-xs text-gray-500 mt-1">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡∏∏‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
    </a>

    <a href="{% url 'dress:back_office_finance' store.id %}"
       class="bg-white border border-gray-200 rounded-2xl shadow p-6 text-center
              hover:shadow-md hover:-translate-y-0.5 transform transition">
      <div class="text-4xl mb-3">üí≥</div>
      <p class="font-semibold text-gray-800">‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</p>
      <p class="text-xs text-gray-500 mt-1">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
    </a>

    <a href="{% url 'dress:back_office_stats' store.id %}"
       class="bg-white border border-gray-200 rounded-2xl shadow p-6 text-center
              hover:shadow-md hover:-translate-y-0.5 transform transition">
      <div class="text-4xl mb-3">üìà</div>
      <p class="font-semibold text-gray-800">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</p>
      <p class="text-xs text-gray-500 mt-1">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</p>
    </a>
  </section>

</main>

</body>
</html>
